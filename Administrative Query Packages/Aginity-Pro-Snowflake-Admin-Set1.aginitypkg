{"entities":[{"fqn":"/Community Queries/Snowflake/Administrative Queries/Get Tables from Data Dictionary","id":"03af6e2e-59d6-4cb7-854d-efa36246fbac","parent_folder_id":"a4500926-6130-45d6-8783-8a72c4f61cd5","name":"Get Tables from Data Dictionary","entity_type":"SQL_ENTITY","description":"This script will take a schema parameter and return all tables in a Snowflake database","content":"select t.table_name\nfrom information_schema.tables t\nwhere LOWER(t.table_schema) = LOWER($ENTER_SCHEMA)  -- put schema name here\n      and t.table_type = 'BASE TABLE'\norder by t.table_name;","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-18T15:53:51.221341Z","executed_count":7},{"fqn":"/Community Queries/Snowflake","id":"050a89ce-6a35-4719-a191-c798858eb64e","parent_folder_id":"067ce53b-d1d2-431a-9f3d-4765eb18eebf","name":"Snowflake","entity_type":"FOLDER"},{"fqn":"/Community Queries","id":"067ce53b-d1d2-431a-9f3d-4765eb18eebf","parent_folder_id":"bb6de4af-1aad-493e-a9ee-b3e75cf58ed7","name":"Community Queries","entity_type":"FOLDER"},{"fqn":"/Community Queries/Snowflake/Administrative Queries/Get Tables Size in MB in a schema","id":"3b697ea1-fd29-4441-b730-b879817769e3","parent_folder_id":"a4500926-6130-45d6-8783-8a72c4f61cd5","name":"Get Tables Size in MB in a schema","entity_type":"SQL_ENTITY","description":"","content":"select \r\n  table_catalog\r\n  , table_schema\r\n  , table_name\r\n  , round(sum(bytes)/1024/1024) as size_MB\r\nfrom \r\n  information_schema.tables\r\nwhere\r\n  upper(table_schema) not in ('INFORMATION_SCHEMA')\r\n  and (case when trim($table_schema) ='' then 1=1 else upper(table_schema) = upper(trim($table_schema)) end) \r\ngroup by \r\n  table_catalog,table_schema,table_name\r\norder by \r\n  4 desc","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-18T15:04:28.650109Z","executed_count":10},{"fqn":"/Community Queries/Snowflake/Administrative Queries/Get running Queries","id":"499007ef-3dbc-4c21-982d-e216f01e6716","parent_folder_id":"a4500926-6130-45d6-8783-8a72c4f61cd5","name":"Get running Queries","entity_type":"SQL_ENTITY","description":"Created from editor","content":"select *\r\nfrom table(information_schema.query_history_by_session())\r\norder by start_time","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-18T15:03:58.068829Z","executed_count":2},{"fqn":"/Community Queries/Snowflake/Administrative Queries/Get query history for the last N hours","id":"4dd7b211-eca1-4d49-a18d-e0543707ae0a","parent_folder_id":"a4500926-6130-45d6-8783-8a72c4f61cd5","name":"Get query history for the last N hours","entity_type":"SQL_ENTITY","description":"Created from editor","content":"select \r\n  DATABASE_NAME\r\n  , QUERY_TYPE\r\n  , USER_NAME\r\n  , START_TIME\r\n  , TOTAL_ELAPSED_TIME\r\n  , ROWS_PRODUCED\r\n  , QUERY_TEXT\r\n  , EXECUTION_STATUS\r\n  , ERROR_CODE\r\n  , ERROR_MESSAGE\r\nfrom \r\n  table(information_schema.query_history(dateadd('hours',-$hours,current_timestamp()),current_timestamp()))\r\norder by \r\n  start_time","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-18T15:03:43.877774Z","executed_count":3},{"fqn":"/Community Queries/Snowflake/Administrative Queries/Get tables DDL stmt in a schema","id":"70d1d501-d04f-4e1a-bc16-f7452a92d32f","parent_folder_id":"a4500926-6130-45d6-8783-8a72c4f61cd5","name":"Get tables DDL stmt in a schema","entity_type":"SQL_ENTITY","description":"","content":"SELECT \r\n  'SELECT GET_DDL(''TABLE'',''' ||  table_schema || '.' || table_name || ''');' AS stmt\r\nFROM \r\n  INFORMATION_SCHEMA.TABLES \r\nWHERE\r\n  upper(table_schema) not in ('INFORMATION_SCHEMA')\r\n  and (case when trim($table_schema) ='' then 1=1 else upper(table_schema) = upper(trim($table_schema)) end)","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-18T15:04:04.888740Z","executed_count":5},{"fqn":"/Community Queries/Snowflake/Administrative Queries","id":"a4500926-6130-45d6-8783-8a72c4f61cd5","parent_folder_id":"050a89ce-6a35-4719-a191-c798858eb64e","name":"Administrative Queries","entity_type":"FOLDER"},{"fqn":"/Community Queries/Snowflake/Administrative Queries/Show Tables in a schema","id":"bbd6bce6-114f-4201-a0ad-8e9eb14164ea","parent_folder_id":"a4500926-6130-45d6-8783-8a72c4f61cd5","name":"Show Tables in a schema","entity_type":"SQL_ENTITY","description":"","content":"show tables in schema identifier($schema);","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-18T15:55:27.654761Z","executed_count":7},{"fqn":"/Community Queries/Snowflake/Administrative Queries/Get Constraints on tables for given schema","id":"d10e8453-6355-43e9-8226-87376c1fa1e4","parent_folder_id":"a4500926-6130-45d6-8783-8a72c4f61cd5","name":"Get Constraints on tables for given schema","entity_type":"SQL_ENTITY","description":"","content":"SELECT \r\n  table_name\r\n  , constraint_type\r\n  , constraint_name\r\nFROM \r\n  information_schema.table_constraints\r\nWHERE \r\n  (case when trim($schema_name) ='' then 1=1 else upper(constraint_schema) = upper(trim($schema_name)) end) \r\nORDER BY \r\n  table_name","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-18T15:03:29.408771Z","executed_count":7},{"fqn":"/Community Queries/Snowflake/Administrative Queries/Generate DROP tables in schema","id":"f1bbb0fd-2ca2-46e6-af7f-8527aa5fdfff","parent_folder_id":"a4500926-6130-45d6-8783-8a72c4f61cd5","name":"Generate DROP tables in schema","entity_type":"SQL_ENTITY","description":"Created from editor","content":"SELECT \r\n  'drop table '||table_name||' cascade;' as stmt\r\nFROM \r\n  information_schema.tables tables\r\nWHERE \r\n  upper(table_schema) not in ('INFORMATION_SCHEMA')\r\n  and (case when trim($table_schema) ='' then 1=1 else upper(table_schema) = upper(trim($table_schema)) end)\r\nORDER BY 1","type":"QUERY","platform":"Snowflake","executed_at":"2019-09-18T15:02:36.421330Z","executed_count":2}]}